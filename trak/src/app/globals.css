@import 'tailwindcss';

@custom-variant dark (&:is(.dark *));

@layer base {
  :root {
    /* ===== SARAJEVO THEME ===== */
    /* A productivity-focused theme inspired by Sarajevo, Bosnia */
    /* Blends "monumental structure" (Brutalist/Deco) with "airy resilience" */
    /* Features the Sarajevo Arts Palette: Tile Orange, Dome Teal, River Indigo, Tram Yellow, Velvet Purple */
    
    /* Typography */
    --font-sans: 'Inter', 'Public Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-serif: 'Newsreader', 'Georgia', 'Cambria', 'Times New Roman', serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

    /* Backgrounds - Warm, matte, no high-glare */
    --background: #F2F0EB; /* Plaster Canvas - warm off-white, matte */
    --surface: #FFFFFF; /* Card White - for active content only */
    --surface-hover: #EBE9E4; /* Slightly darker plaster for hover states */
    --surface-muted: #E8E6E1; /* Muted plaster for secondary surfaces */
    
    /* Borders - Structural, visible but light */
    --border: #D1D4D6; /* River Mist - structural dividers */
    --border-strong: #ba7b84; /* Secondary color for emphasis */
    
    /* Typography Colors */
    --foreground: #2D3236; /* Miljacka Slate - deep iron grey, not black */
    --muted-foreground: #6B7280; /* Standard cool gray for metadata */
    --tertiary-foreground: #9CA3AF; /* Lighter gray for placeholders */

    /* Primary Action - Coffee Patina (bronze/brown) */
    --primary: #9C7C58; /* Coffee Patina - bronze/brown for buttons, active tabs */
    --primary-foreground: #FFFFFF;
    --primary-hover: #8A6D4C; /* Darker coffee for hover */
    --focus-ring: rgba(186, 123, 132, 0.3); /* Secondary color with transparency */
    --ring-offset: #F2F0EB;
    
    /* Secondary Color - Rose Dust */
    --secondary: #ba7b84; /* Secondary color for accents, borders, hover states */

    /* Semantic Colors - Muted, low saturation */
    --success: #6B827D; /* Oxidized Sage - muted copper green */
    --success-foreground: #FFFFFF;
    --warning: #C9A857; /* Antique Gold - muted amber */
    --warning-foreground: #2D3236;
    --error: #B85C5C; /* Muted Rose - terra-cotta, low saturation */
    --error-foreground: #FFFFFF;
    --info: #6B8CAE; /* Dusty Denim - muted blue */
    --info-foreground: #FFFFFF;
    
    /* ===== SARAJEVO ARTS PALETTE ===== */
    /* Rich, earthy colors inspired by Sarajevo's artistic heritage */
    --tile-orange: #C77D63; /* Terracotta roofs - High Priority, Urgent */
    --dome-teal: #4A7A78; /* Copper oxidation - Done states, folders, icons */
    --river-indigo: #52637A; /* Miljacka at dusk - New tags, nav icons */
    --tram-yellow: #D4A353; /* Electric trams - In Progress, Warning */
    --velvet-purple: #7D6B7D; /* Dried flowers/smoke - Personal, Admin */
    
    /* Navigation icon color */
    --nav-icon: #52637A; /* River Indigo for sidebar icons */
    --nav-icon-active: #4A7A78; /* Dome Teal for active state */

    /* Border Radius - Rounded rectangles for a softer, modern UI */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 18px;
    
    /* Shadows - Minimal, replaced with borders */
    --shadow-card: none;
    --shadow-modal: 0 4px 24px rgba(0, 0, 0, 0.05);
  }

  /* Dark Theme - Maintains Sarajevo aesthetic */
  .dark {
    --background: #1A1918; /* Dark plaster */
    --surface: #242321; /* Dark card */
    --surface-hover: #2D2C2A;
    --surface-muted: #323130;
    --border: #3D3B39;
    --border-strong: #c98d96; /* Secondary color for dark mode */
    --foreground: #E8E6E1;
    --muted-foreground: #9CA3AF;
    --tertiary-foreground: #6B7280;
    --ring-offset: #1A1918;
    --primary: #B89A74; /* Lighter coffee for dark mode */
    --primary-hover: #C9AB85;
    
    /* Secondary Color - Rose Dust (lighter for dark mode) */
    --secondary: #c98d96;
    
    /* Arts palette - slightly lighter for dark mode */
    --tile-orange: #D98E74;
    --dome-teal: #5A8A88;
    --river-indigo: #6B7C94;
    --tram-yellow: #E4B363;
    --velvet-purple: #8D7B8D;
    --nav-icon: #6B7C94;
    --nav-icon-active: #5A8A88;
  }

  /* Brutalist Theme - Cursor Black Midnight dark mode */
  .brutalist {
    --background: #1c1c1c;
    --surface: #252526;
    --surface-hover: #2d2d30;
    --surface-muted: #2a2d2e;
    --border: #3e3e42;
    --border-strong: #464647;
    --foreground: #cccccc;
    --muted-foreground: #858585;
    --tertiary-foreground: #6a6a6a;
    --primary: #007acc;
    --primary-foreground: #ffffff;
    --focus-ring: rgba(0, 122, 204, 0.4);
    --ring-offset: #1c1c1c;
    --success: #4ec9b0;
    --warning: #dcdcaa;
    --error: #f48771;
    --info: #4ec9b0;
    /* Keep theme-specific radius values for consistency */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 18px;
  }

  * {
    border-color: var(--border);
  }

  body {
    font-family: var(--font-sans);
    @apply bg-[var(--background)] text-[var(--foreground)] antialiased transition-colors duration-200 ease-out;
    font-feature-settings: "rlig" 1, "calt" 1;
    min-height: 100vh;
    font-size: 14px;
    line-height: 1.6;
  }

  /* Headings - Serif font for "historic studio" feel */
  h1 {
    font-family: var(--font-serif);
    @apply text-[26px] font-semibold text-[var(--foreground)] leading-tight tracking-tight;
  }

  h2 {
    font-family: var(--font-serif);
    @apply text-[22px] font-semibold text-[var(--foreground)] leading-tight tracking-tight;
  }

  h3 {
    font-family: var(--font-serif);
    @apply text-[18px] font-medium text-[var(--foreground)] leading-snug;
  }

  h4 {
    font-family: var(--font-sans);
    @apply text-[15px] font-semibold text-[var(--foreground)] leading-snug tracking-wide;
    letter-spacing: 0.02em;
  }

  p {
    @apply text-[14px] leading-relaxed text-[var(--muted-foreground)];
  }

  label {
    @apply text-[12px] font-medium text-[var(--foreground)] tracking-wide;
    letter-spacing: 0.01em;
  }

  a {
    @apply text-[var(--primary)] underline-offset-4 hover:underline;
  }

  code {
    border-radius: var(--radius-sm);
    background-color: var(--surface-muted);
    padding: 0.15rem 0.35rem;
    font-size: 0.8rem;
    font-weight: 500;
    font-family: var(--font-mono);
    color: var(--foreground);
  }

  /* Form elements - Flat, matte, structural */
  input,
  textarea,
  select {
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    background-color: var(--surface);
    font-size: 0.875rem;
    color: var(--foreground);
    transition: border-color 0.15s ease-out;
  }
  
  input::placeholder,
  textarea::placeholder,
  select::placeholder {
    color: var(--tertiary-foreground);
  }
  
  input:focus,
  textarea:focus,
  select:focus {
    border-color: var(--border-strong);
  }

  /* Brutalist theme styling is handled at component level, not via CSS overrides */
}

@layer utilities {
  .text-tertiary {
    color: var(--tertiary-foreground);
  }

  .bg-surface {
    background-color: var(--surface);
  }

  .bg-surface-hover {
    background-color: var(--surface-hover);
  }

  .border-strong {
    border-color: var(--border-strong);
  }

  /* ===== SARAJEVO SHADOWS ===== */
  /* Minimal shadows - prefer borders for structure */
  .shadow-card {
    box-shadow: none;
  }

  .shadow-popover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
  }
  
  /* Modal shadow - very diffuse, low opacity (exception per theme spec) */
  .shadow-modal {
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.05);
  }

  /* Deco-style divider - double line effect */
  .divider-deco {
    border-top: 2px solid var(--border);
    border-bottom: 1px solid var(--border);
    height: 4px;
    background: transparent;
  }
  
  /* Thick structural divider */
  .divider-structural {
    border-top: 3px solid var(--border);
  }
  
  /* ===== SELECTION STATE UTILITIES (Arts Palette) ===== */
  /* Use these for selected rows, cards, and interactive elements */
  .selected-coffee {
    background-color: rgba(156, 124, 88, 0.05);
    border-color: rgba(156, 124, 88, 0.2);
  }
  
  .selected-teal {
    background-color: rgba(74, 122, 120, 0.05);
    border-color: rgba(74, 122, 120, 0.2);
  }
  
  .selected-indigo {
    background-color: rgba(82, 99, 122, 0.05);
    border-color: rgba(82, 99, 122, 0.2);
  }
  
  /* Row hover with Arts palette tint */
  .row-hover-teal:hover {
    background-color: rgba(74, 122, 120, 0.04);
  }
  
  .row-hover-coffee:hover {
    background-color: rgba(156, 124, 88, 0.04);
  }

  /* Block entrance animation - subtle, structural */
  @keyframes block-swoosh-in {
    0% {
      opacity: 0;
      transform: translateY(8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-block-swoosh-in {
    animation: block-swoosh-in 0.25s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
  }
  
  /* Focus states - structural, not glowy */
  .focus-structural:focus-visible {
    outline: 2px solid var(--border-strong);
    outline-offset: 2px;
  }

  /* Round legacy sharp utility classes for a modern UI */
  .rounded-\[2px\] {
    border-radius: var(--radius-sm) !important;
  }

  .rounded-\[4px\] {
    border-radius: var(--radius-md) !important;
  }

  .rounded-sm {
    border-radius: var(--radius-sm) !important;
  }
}

/* Rich Text Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--tertiary-foreground);
  pointer-events: none;
  height: 0;
}

.ProseMirror h1 {
  font-size: 2em;
  font-weight: 700;
  line-height: calc(var(--line-spacing, 1.5) * 1.2);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror h2 {
  font-size: 1.5em;
  font-weight: 600;
  line-height: calc(var(--line-spacing, 1.5) * 1.3);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror h3 {
  font-size: 1.25em;
  font-weight: 600;
  line-height: calc(var(--line-spacing, 1.5) * 1.4);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  line-height: var(--line-spacing, 1.5);
  font-size: 1em;
  color: var(--foreground);
}

.ProseMirror li {
  line-height: var(--line-spacing, 1.5);
}

.ProseMirror blockquote {
  line-height: var(--line-spacing, 1.5);
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5em;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.ProseMirror ul li {
  list-style-type: disc;
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

.ProseMirror ol li {
  list-style-type: decimal;
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

.ProseMirror blockquote {
  border-left: 3px solid var(--border-strong);
  padding-left: 1em;
  margin-left: 0;
  margin-right: 0;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  color: var(--muted-foreground);
  font-style: italic;
}

  .ProseMirror code {
    background-color: var(--surface-muted);
    padding: 0.2em 0.4em;
    border-radius: var(--radius-sm);
    font-size: 0.9em;
    font-family: monospace;
    color: var(--foreground);
  }

  .ProseMirror pre {
    background-color: var(--surface-muted);
    border-radius: var(--radius-md);
    padding: 1em;
    overflow-x: auto;
    margin-top: 0.75em;
    margin-bottom: 0.75em;
  }

.ProseMirror pre code {
  background-color: transparent;
  padding: 0;
  font-size: 0.875em;
  line-height: 1.5;
}

.ProseMirror a {
  color: var(--primary);
  text-decoration: underline;
  cursor: pointer;
}

.ProseMirror a:hover {
  color: var(--primary-hover);
}

.ProseMirror hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 2em 0;
}

/* Print Styles for PDF Export */
@media print {
  /* Hide UI elements */
  body > div:first-child > aside,
  nav,
  button,
  .no-print {
    display: none !important;
  }

  /* Force white background and black text */
  * {
    background: white !important;
    color: black !important;
    border-color: #ccc !important;
  }

  /* Show the document at full width */
  body {
    margin: 0;
    padding: 0;
  }

  /* Adjust page margins */
  @page {
    margin: 1in;
    size: letter;
  }

  /* Make sure editor content is visible */
  .ProseMirror {
    background: white !important;
    padding: 0 !important;
    max-width: 100% !important;
  }

  /* Improve text rendering */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    font-weight: bold !important;
  }

  p {
    orphans: 3;
    widows: 3;
  }

  /* Avoid breaking inside lists */
  ul, ol {
    page-break-inside: avoid;
  }

  /* Remove shadows and borders */
  .shadow-lg,
  .rounded-sm {
    box-shadow: none !important;
    border-radius: 0 !important;
  }
}

/* ===== CUSTOM SCROLLBAR STYLES ===== */
/* Theme-aware scrollbars matching the design system */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: var(--surface-muted);
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: var(--radius-sm);
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--border-strong);
  background-clip: padding-box;
}

/* Always show scrollbar track */
.scrollbar-thin {
  scrollbar-gutter: stable;
}

.scrollbar-thin::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: var(--surface-muted);
  border-radius: var(--radius-sm);
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: var(--radius-sm);
  border: 2px solid transparent;
  background-clip: padding-box;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--border-strong);
  background-clip: padding-box;
}

/* Firefox scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) var(--surface-muted);
}
