@import 'tailwindcss';

@custom-variant dark (&:is(.dark *));

@layer base {
  :root {
    --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

    --background: #fafafa;
    --surface: #ffffff;
    --surface-hover: #f6f6f6;
    --surface-muted: #efefef;
    --border: #e5e5e5;
    --border-strong: #d4d4d4;
    --foreground: #1f1f1f;
    --muted-foreground: #545454;
    --tertiary-foreground: #9f9f9f;

    --primary: #1f1f1f;
    --primary-foreground: #ffffff;
    --focus-ring: rgba(31, 31, 31, 0.22);
    --ring-offset: #fafafa;

    --success: #0ea5e9;
    --warning: #f59e0b;
    --error: #ef4444;
    --info: #2563eb;

    --radius-xs: 4px;
    --radius-sm: 5px;
    --radius-md: 6px;
    --radius-lg: 8px;
    --radius-xl: 10px;
  }

  .dark {
    --background: #101010;
    --surface: #141414;
    --surface-hover: #1d1d1d;
    --surface-muted: #202020;
    --border: #2a2a2a;
    --border-strong: #383838;
    --foreground: #e5e5e5;
    --muted-foreground: #a8a8a8;
    --tertiary-foreground: #7d7d7d;
    --ring-offset: #101010;
  }

  /* Brutalist Theme - Cursor Black Midnight dark mode with no rounded corners */
  .brutalist {
    --background: #1c1c1c;
    --surface: #252526;
    --surface-hover: #2d2d30;
    --surface-muted: #2a2d2e;
    --border: #3e3e42;
    --border-strong: #464647;
    --foreground: #cccccc;
    --muted-foreground: #858585;
    --tertiary-foreground: #6a6a6a;
    --primary: #007acc;
    --primary-foreground: #ffffff;
    --focus-ring: rgba(0, 122, 204, 0.4);
    --ring-offset: #1c1c1c;
    --success: #4ec9b0;
    --warning: #dcdcaa;
    --error: #f48771;
    --info: #4ec9b0;
    /* Remove all border radius */
    --radius-xs: 0px;
    --radius-sm: 0px;
    --radius-md: 0px;
    --radius-lg: 0px;
    --radius-xl: 0px;
  }

  * {
    border-color: var(--border);
  }

  body {
    font-family: var(--font-sans);
    @apply bg-[var(--background)] text-[var(--foreground)] antialiased transition-colors duration-200 ease-out;
    font-feature-settings: "rlig" 1, "calt" 1;
    min-height: 100vh;
    font-size: 14px;
  }

  h1 {
    @apply text-[24px] font-semibold text-[var(--foreground)] leading-snug;
  }

  h2 {
    @apply text-[20px] font-semibold text-[var(--foreground)] leading-snug;
  }

  h3 {
    @apply text-[16px] font-medium text-[var(--foreground)] leading-snug;
  }

  p {
    @apply text-[13px] leading-relaxed text-[var(--muted-foreground)];
  }

  label {
    @apply text-[11px] font-medium text-[var(--foreground)];
  }

  a {
    @apply text-[var(--foreground)] underline-offset-4 hover:underline;
  }

  code {
    border-radius: var(--radius-sm);
    background-color: var(--surface-muted);
    padding: 0.125rem 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--foreground);
  }

  input,
  textarea,
  select {
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    background-color: var(--surface);
    font-size: 0.875rem;
    color: var(--foreground);
  }
  
  input::placeholder,
  textarea::placeholder,
  select::placeholder {
    color: var(--tertiary-foreground);
  }

  /* Brutalist theme - remove all rounded corners */
  .brutalist *,
  .brutalist *::before,
  .brutalist *::after {
    border-radius: 0 !important;
  }

  /* Brutalist theme styling is handled at component level, not via CSS overrides */

  input:focus,
  textarea:focus,
  select:focus {
    outline: none !important;
    box-shadow: none !important;
  }
}

@layer utilities {
  .text-tertiary {
    color: var(--tertiary-foreground);
  }

  .bg-surface {
    background-color: var(--surface);
  }

  .bg-surface-hover {
    background-color: var(--surface-hover);
  }

  .border-strong {
    border-color: var(--border-strong);
  }

  .shadow-card {
    @apply shadow-[0_4px_16px_rgba(0,0,0,0.04)];
  }

  .shadow-popover {
    @apply shadow-[0_12px_28px_rgba(0,0,0,0.08)];
  }

  /* Block entrance animation - swoosh effect */
  @keyframes block-swoosh-in {
    0% {
      opacity: 0;
      transform: translateY(20px) scale(0.96);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate-block-swoosh-in {
    animation: block-swoosh-in 0.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
}

/* Rich Text Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--tertiary-foreground);
  pointer-events: none;
  height: 0;
}

.ProseMirror h1 {
  font-size: 2em;
  font-weight: 700;
  line-height: calc(var(--line-spacing, 1.5) * 1.2);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror h2 {
  font-size: 1.5em;
  font-weight: 600;
  line-height: calc(var(--line-spacing, 1.5) * 1.3);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror h3 {
  font-size: 1.25em;
  font-weight: 600;
  line-height: calc(var(--line-spacing, 1.5) * 1.4);
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  color: var(--foreground);
}

.ProseMirror p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  line-height: var(--line-spacing, 1.5);
  font-size: 1em;
  color: var(--foreground);
}

.ProseMirror li {
  line-height: var(--line-spacing, 1.5);
}

.ProseMirror blockquote {
  line-height: var(--line-spacing, 1.5);
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5em;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.ProseMirror ul li {
  list-style-type: disc;
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

.ProseMirror ol li {
  list-style-type: decimal;
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

.ProseMirror blockquote {
  border-left: 3px solid var(--border-strong);
  padding-left: 1em;
  margin-left: 0;
  margin-right: 0;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  color: var(--muted-foreground);
  font-style: italic;
}

  .ProseMirror code {
    background-color: var(--surface-muted);
    padding: 0.2em 0.4em;
    border-radius: var(--radius-sm);
    font-size: 0.9em;
    font-family: monospace;
    color: var(--foreground);
  }

  .ProseMirror pre {
    background-color: var(--surface-muted);
    border-radius: var(--radius-md);
    padding: 1em;
    overflow-x: auto;
    margin-top: 0.75em;
    margin-bottom: 0.75em;
  }

.ProseMirror pre code {
  background-color: transparent;
  padding: 0;
  font-size: 0.875em;
  line-height: 1.5;
}

.ProseMirror a {
  color: #2563eb;
  text-decoration: underline;
  cursor: pointer;
}

.ProseMirror a:hover {
  color: #1d4ed8;
}

.ProseMirror hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 2em 0;
}

/* Print Styles for PDF Export */
@media print {
  /* Hide UI elements */
  body > div:first-child > aside,
  nav,
  button,
  .no-print {
    display: none !important;
  }

  /* Force white background and black text */
  * {
    background: white !important;
    color: black !important;
    border-color: #ccc !important;
  }

  /* Show the document at full width */
  body {
    margin: 0;
    padding: 0;
  }

  /* Adjust page margins */
  @page {
    margin: 1in;
    size: letter;
  }

  /* Make sure editor content is visible */
  .ProseMirror {
    background: white !important;
    padding: 0 !important;
    max-width: 100% !important;
  }

  /* Improve text rendering */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    font-weight: bold !important;
  }

  p {
    orphans: 3;
    widows: 3;
  }

  /* Avoid breaking inside lists */
  ul, ol {
    page-break-inside: avoid;
  }

  /* Remove shadows and borders */
  .shadow-lg,
  .rounded-sm {
    box-shadow: none !important;
    border-radius: 0 !important;
  }
}
